{% extends 'user/base.html' %}

{% block title %}Standar Kompetensi Sistem Pembayaran{% endblock %}

{% block content %}
<div class="row justify-content-center mt-4">
    <div class="col-12 col-lg-12">
        <div class="card shadow-lg p-4">
            <h3 class="text-center mb-4">Formulir Standar Kompetensi Sistem Pembayaran</h3>
            <form method="POST" action="/submit/standar-kompetensi" enctype="multipart/form-data" id="competencyForm">
                <!-- Basic Information Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Informasi Dasar</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="tahun" class="form-label">Tahun Laporan</label>
                                <select class="form-select" id="tahun" name="tahun" required>
                                    <option value="">-- Pilih Tahun --</option>
                                    {% for year in range(2020, 2026) %}
                                    <option value="{{ year }}">{{ year }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="periode" class="form-label">Periode Laporan (Triwulan)</label>
                                <select class="form-select" id="periode" name="periode" required>
                                    <option value="">-- Pilih Triwulan --</option>
                                    <option value="1">Triwulan I</option>
                                    <option value="2">Triwulan II</option>
                                    <option value="3">Triwulan III</option>
                                    <option value="4">Triwulan IV</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="penyelenggara" class="form-label">Nama Penyelenggara</label>
                                <select class="form-select" id="penyelenggara" name="penyelenggara" required>
                                    <option value="">-- Pilih Penyelenggara --</option>
                                    <option value="Bank A">Bank A</option>
                                    <option value="Bank B">Bank B</option>
                                    <option value="Non-Bank X">Non-Bank X</option>
                                    <option value="Non-Bank Y">Non-Bank Y</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="nomor_surat" class="form-label">Nomor Surat</label>
                                <input type="text" class="form-control" id="nomor_surat" name="nomor_surat" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="tanggal_surat" class="form-label">Tanggal Surat</label>
                                <input type="date" class="form-control" id="tanggal_surat" name="tanggal_surat" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="jenis_pelaku" class="form-label">Jenis Pelaku SPPUR</label>
                                <select class="form-select" id="jenis_pelaku" name="jenis_pelaku" required>
                                    <option value="">-- Pilih Jenis Pelaku --</option>
                                    <option value="Bank">Bank</option>
                                    <option value="Non Bank">Non Bank</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="tahap" class="form-label">Tahap</label>
                                <select class="form-select" id="tahap" name="tahap" required>
                                    <option value="">-- Pilih Tahap --</option>
                                    <option value="1">Tahap 1</option>
                                    <option value="2">Tahap 2</option>
                                    <option value="3">Tahap 3</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="sub_bidang" class="form-label">Sub Bidang SKKNI</label>
                                <select class="form-select" id="sub_bidang" name="sub_bidang" required>
                                    <option value="">-- Pilih Sub Bidang --</option>
                                    <option value="Sistem Pembayaran">Sistem Pembayaran</option>
                                    <option value="Kliring">Kliring</option>
                                    <option value="Settlement">Settlement</option>
                                    <option value="Manajemen Risiko">Manajemen Risiko</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="pic" class="form-label">PIC (KPW BI)</label>
                                <select class="form-select" id="pic" name="pic" required>
                                    <option value="">-- Pilih KPW BI --</option>
                                    <option value="KPW BI Jakarta">KPW BI Jakarta</option>
                                    <option value="KPW BI Bandung">KPW BI Bandung</option>
                                    <option value="KPW BI Surabaya">KPW BI Surabaya</option>
                                    <option value="KPW BI Medan">KPW BI Medan</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rencana Penyediaan Dana Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Rencana Penyediaan Dana (Rp)</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="dana_ppbk" class="form-label">Total Rencana Penyediaan Dana PPBK Sistem Pembayaran Tahun Berikutnya</label>
                                <input type="number" class="form-control" id="dana_ppbk" name="dana_ppbk" min="0" step="100000" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="dana_pemeliharaan_pbk" class="form-label">Total Rencana Penyediaan Dana Pemeliharaan PBK Sistem Pembayaran Tahun Berikutnya</label>
                                <input type="number" class="form-control" id="dana_pemeliharaan_pbk" name="dana_pemeliharaan_pbk" min="0" step="100000" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="dana_sertifikasi" class="form-label">Total Rencana Penyediaan Dana Sertifikasi Kompetensi Sistem Pembayaran Tahun Berikutnya</label>
                                <input type="number" class="form-control" id="dana_sertifikasi" name="dana_sertifikasi" min="0" step="100000" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="dana_pemeliharaan_sertifikasi" class="form-label">Total Rencana Penyediaan Dana Pemeliharaan Sertifikasi Kompetensi Sistem Pembayaran Tahun Berikutnya</label>
                                <input type="number" class="form-control" id="dana_pemeliharaan_sertifikasi" name="dana_pemeliharaan_sertifikasi" min="0" step="100000" required>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Data Pegawai Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Data Pegawai</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-4">
                            <h6>Total Pegawai PBK</h6>
                            <div class="col-md-4 mb-3">
                                <label for="total_pbk_lv4" class="form-label">Level 4</label>
                                <input type="number" class="form-control" id="total_pbk_lv4" name="total_pbk_lv4" min="0" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="total_pbk_lv5" class="form-label">Level 5</label>
                                <input type="number" class="form-control" id="total_pbk_lv5" name="total_pbk_lv5" min="0" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="total_pbk_lv6" class="form-label">Level 6</label>
                                <input type="number" class="form-control" id="total_pbk_lv6" name="total_pbk_lv6" min="0" required>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <h6>Total Pegawai SK Level Direksi</h6>
                            <div class="col-md-12 mb-3">
                                <label for="total_sk_direksi" class="form-label">Jumlah</label>
                                <input type="number" class="form-control" id="total_sk_direksi" name="total_sk_direksi" min="0" required>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rencana PBK Pelaksana Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Rencana PBK Pelaksana</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Triwulan</th>
                                        <th>Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in range(1,5) %}
                                    <tr>
                                        <td>Triwulan {{ i }}</td>
                                        <td><input type="number" class="form-control" name="rencana_pbk_pelaksana_{{ i }}" min="0" required></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Rencana PBK Penyelia Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Rencana PBK Penyelia</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Triwulan</th>
                                        <th>Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in range(1,5) %}
                                    <tr>
                                        <td>Triwulan {{ i }}</td>
                                        <td><input type="number" class="form-control" name="rencana_pbk_penyelia_{{ i }}" min="0" required></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Rencana PBK Pejabat Eksekutif Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Rencana PBK Pejabat Eksekutif</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Triwulan</th>
                                        <th>Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in range(1,5) %}
                                    <tr>
                                        <td>Triwulan {{ i }}</td>
                                        <td><input type="number" class="form-control" name="rencana_pbk_eksekutif_{{ i }}" min="0" required></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Pemeliharaan PBK Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Pemeliharaan PBK</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Level</th>
                                        <th>Triwulan I</th>
                                        <th>Triwulan II</th>
                                        <th>Triwulan III</th>
                                        <th>Triwulan IV</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for level in [4,5,6] %}
                                    <tr>
                                        <td>Level {{ level }}</td>
                                        {% for i in range(1,5) %}
                                        <td><input type="number" class="form-control" name="pemeliharaan_pbk_lv{{ level }}_{{ i }}" min="0" required></td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Rencana SK Pejabat Direksi Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Rencana SK Pejabat Direksi</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Triwulan</th>
                                        <th>Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in range(1,5) %}
                                    <tr>
                                        <td>Triwulan {{ i }}</td>
                                        <td><input type="number" class="form-control" name="rencana_sk_direksi_{{ i }}" min="0" required></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Pemeliharaan SK Level Direksi Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Pemeliharaan SK Level Direksi</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Triwulan</th>
                                        <th>Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in range(1,5) %}
                                    <tr>
                                        <td>Triwulan {{ i }}</td>
                                        <td><input type="number" class="form-control" name="pemeliharaan_sk_direksi_{{ i }}" min="0" required></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Keterangan Section -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Keterangan</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="keterangan" class="form-label">Keterangan Tambahan</label>
                            <textarea class="form-control" id="keterangan" name="keterangan" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Submit Button -->
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary btn-lg">Kirim Formulir</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .card {
        margin-bottom: 1.5rem;
    }
    .card-header {
        font-weight: 600;
        padding: 1rem 1.25rem;
    }
    .table th {
        white-space: nowrap;
    }
    .table input {
        min-width: 80px;
    }
    h6 {
        color: #495057;
        font-weight: 600;
        margin-top: 1rem;
        margin-bottom: 1rem;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Validasi form sebelum submit
    document.getElementById('competencyForm').addEventListener('submit', function(e) {
        // Validasi tambahan bisa ditambahkan di sini
        console.log('Form submitted');
    });
    
    // Format input angka dengan separator ribuan
    const numberInputs = document.querySelectorAll('input[type="number"]');
    numberInputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (this.value) {
                this.value = parseInt(this.value).toLocaleString('id-ID');
            }
        });
        
        input.addEventListener('focus', function() {
            if (this.value) {
                this.value = this.value.replace(/\./g, '');
            }
        });
    });
});
</script>
{% endblock %}